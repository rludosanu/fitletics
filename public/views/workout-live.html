<!DOCTYPE html>
{{=[[ ]]=}}
<html ng-app="my-app">
	<head>
		<title>MyApp Home</title>

    <meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, user-scalable=no">

		<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans|Quicksand:300,400,500,700" />
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" />

		<link rel="stylesheet" href="/public/stylesheets/common.css" type="text/css" />
		<link rel="stylesheet" media="only screen and (max-width: 600px)" href="/public/stylesheets/xs-screen.css" type="text/css" />

		<script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.7.2/angular.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.7.2/angular-cookies.js"></script>
	</head>
  <body ng-controller="workoutLive">
		<div style="position: absolute; z-index: 10; width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; background: rgba(0, 0, 0, 0.8);" ng-show="state.giveup == true">
			<div style="padding: 10px; width: 100%;">
				<div style="background: white; padding: 25px 15px;">
					<div style="margin-bottom: 5px; font-size: 17px; font-weight: bold;">Giving up is not an option.</div>
					<div style="margin-bottom: 25px; font-size: 15px;">Are you sure you want to cancel this training ?</div>
					<div style="text-align: right;">
						<a ng-click="state.giveup = false" style="color: #3B7FF1; font-size: 15px; margin: 0px 10px;">NO</a>
						<a href="/workout/{{ workout.name.toLowerCase() }}/preview" style="color: #3B7FF1; font-size: 15px; margin: 0px 10px;">YES I AM A LOSER</a>
					</div>
				</div>
			</div>
		</div>

		<div style="position: absolute; top: 0px; left: 0px; width: 100%; height: 180px;">
			<div style="display: flex; justify-content: space-between; align-items: center; color: white; font-size: 18px; padding: 0px 15px; height: 50px;">
				<div>
					<a ng-click="state.giveup = true" style="color: white;">
						<span class="fa fa-fw fa-times"></span>
					</a>
				</div>
				<div>
					{{ workout.name }}
				</div>
				<div>
					<a ng-click="state.toggleFullscreen()" style="color: white;">
						<span class="fa fa-fw fa-compress" ng-show="state.fullscreen"></span>
						<span class="fa fa-fw fa-expand" ng-show="!state.fullscreen"></span>
					</a>
				</div>
			</div>
			<div style="height: 130px; display: flex; align-items: center; justify-content: center; font-size: 60px; color: white;">
				{{ timer.timer }}
			</div>
		</div>

		<div style="position: absolute; top: 180px; left: 0px; width: 100%; height: calc(100% - 230px); overflow-y: auto;">
			<div style="padding: 15px;">
				<!-- Bar charts -->
				<div style="margin-bottom: 15px;">
					<div style="display: flex;">
						<div style="display: flex; align-items: flex-end; justify-content: space-around; width: 100%; margin: 0px 5px;" ng-repeat="set in workout.sets">
							<div ng-repeat="ex in set" style="height: {{ ex.repetition * barchart.maxHeight / barchart.maxRepetition }}px; flex-grow: 1; margin: 0px 3px; background: {{ barchart.isDoneCSS($parent.$index, $index) }}; border-radius: 6px;">&nbsp;</div>
						</div>
					</div>
				</div>
				<!-- Bar charts -->

				<!-- Progress bar -->
				<div style="margin-bottom: 25px;">
					<div style="height: 24px; background: #292929; border-radius: 6px;"></div>
					<div style="height: 24px; background: #3B7FF1; margin-top: -24px; width: {{ workout.completionPercentage }}%; border-radius: 6px;"></div>
					<div style="height: 24px; margin-top: -24px; display: flex; align-items: center; justify-content: center; color: white; font-size: 12px;">{{ workout.completionPercentage }}%</div>
				</div>
				<!-- Progress bar -->

				<!-- Current exercice -->
				<div style="margin-bottom: 25px;" ng-hide="state.state == 'finished'">
					<div style="color: white; font-size: 14px; margin-bottom: 15px;">
						Exercise
					</div>
					<div style="display: flex; align-items: center;">
						<div style="width: 50px; margin-right: 15px;">
							<img src="http://img.app-liv.jp.s3.amazonaws.com/icon/654810212/a2e9fc63ac821569853c1604232a718c.png" style="width: 100%; display: block; border-radius: 6px;" />
						</div>
						<div style="color: white; font-size: 16px;">
							{{ workout.exercise.repetition }}x {{ workout.exercise.name }}
						</div>
					</div>
				</div>
				<!-- Current exercice -->

				<div style="margin-bottom: 25px;" ng-show="state.state == 'finished'">
					<div style="color: white; font-size: 16px; text-align: center;">
						Congratulations ! Click the finish button to terminate your session.
					</div>
				</div>

			</div>
		</div>

		<div style="position: absolute; bottom: 0px; left: 0px; width: 100%; height: 50px; display: flex; align-items: center; justify-content: center; font-size: 16px; color: white; background: #3B7FF1;" ng-click="state.update()">
			{{ buttonText }}
		</div>

		<script src="/public/controllers/workout.js"></script>
	</body>
</html>
